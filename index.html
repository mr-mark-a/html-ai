<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login System</title>
</head>
<body>
    <h1>Welcome</h1>
    <div id="loginForm">
        <label for="nameInput">Enter your name:</label>
        <input type="text" id="nameInput">
        <button id="submitBtn">Submit</button>
    </div>
    <div id="quizSection" style="display: none;">
        <h2>Extreme Cat Quiz</h2>
        <p>Answer all questions to pass:</p>
        <div>
            <label>1. What is the fastest cat breed?</label>
            <input type="text" id="q1">
        </div>
        <div>
            <label>2. How much years did the cat live that longest ever lived?</label>
            <input type="text" id="q2">
        </div>
        <div>
            <label>3. What is the largest cat breed?</label>
            <input type="text" id="q3">
        </div>
        <div>
            <label>4. How many toes do cats have?</label>
            <input type="text" id="q4">
        </div>
        <div>
            <label>5. What color are cats' eyes at birth?</label>
            <input type="text" id="q5">
        </div>
        <button id="quizBtn">Submit Answers</button>
    </div>
    <div id="userInfo" style="display: none;">
        <h2>Welcome back, <span id="userName"></span>!</h2>
        <p>Your info: <span id="userData"></span></p>
    </div>

    <script>
        const nameInput = document.getElementById('nameInput');
        const submitBtn = document.getElementById('submitBtn');
        const quizSection = document.getElementById('quizSection');
        const quizBtn = document.getElementById('quizBtn');
        const userInfo = document.getElementById('userInfo');
        const userName = document.getElementById('userName');
        const userData = document.getElementById('userData');
        const loginForm = document.getElementById('loginForm');

        // Quiz inputs
        const q1 = document.getElementById('q1');
        const q2 = document.getElementById('q2');
        const q3 = document.getElementById('q3');
        const q4 = document.getElementById('q4');
        const q5 = document.getElementById('q5');

        // Correct answers (case insensitive, trimmed)
        const correctAnswers = {
            q1: ['cheetah', 'cheetah cat'],
            q2: ['22', '22 years'],
            q3: ['maine coon'],
            q4: ['18'],
            q5: ['blue']
        };

        // Function to check answers
        function checkQuiz() {
            const answers = {
                q1: q1.value.trim().toLowerCase(),
                q2: q2.value.trim().toLowerCase(),
                q3: q3.value.trim().toLowerCase(),
                q4: q4.value.trim().toLowerCase(),
                q5: q5.value.trim().toLowerCase()
            };

            let allCorrect = true;
            for (let key in answers) {
                if (!correctAnswers[key].includes(answers[key])) {
                    allCorrect = false;
                    break;
                }
            }

            return allCorrect;
        }

        submitBtn.addEventListener('click', () => {
            const name = nameInput.value.trim();
            if (name) {
                const storedData = localStorage.getItem(name);
                if (storedData) {
                    // Existing user
                    window.location.href = 'marks-games.html';
                } else {
                    // New user, show quiz
                    loginForm.style.display = 'none';
                    quizSection.style.display = 'block';
                }
            } else {
                alert('Please enter a name.');
            }
        });

        quizBtn.addEventListener('click', () => {
            if (checkQuiz()) {
                const name = nameInput.value.trim();
                const userDataObj = { name: name, info: 'Passed extreme cat quiz' };
                localStorage.setItem(name, JSON.stringify(userDataObj));
                window.location.href = 'marks-games.html';
            } else {
                alert('Some answers are wrong. Try again.');
            }
        });

        // Allow submitting quiz on Enter from any input
        [q1, q2, q3, q4, q5].forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    quizBtn.click();
                }
            });
        });
    </script>
</body>
</html>
